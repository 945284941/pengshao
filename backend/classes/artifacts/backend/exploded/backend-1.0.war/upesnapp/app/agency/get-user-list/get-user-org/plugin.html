

<template>

    <style>
        #mbx{
            margin-top: 10px;
            font-size: 16px;
            color: red;
        }
    </style>



    <div id="mbx"><span class='mmbx' data=''>组织架构</span></div>
    <div class="list-block accordion-list" style="margin: 10px 0;">

            <oo>for(var i = 0; i < data.depart.length; i++){</oo>
            <ul>
            <li class="accordion-item">
                <a href="#" class="item-content item-link lia" data="<oo>=data.depart[i].id</oo>" data-type="<oo>=data.depart[i].name</oo>" data-val="<oo>=data.depart[i].pid</oo>">
                <div class="item-inner">
                    <div class="item-title"><oo>=data.depart[i].name</oo></div>
                </div></a>
                <div class="accordion-item-content">
                    <div class="content-block">

                    </div>
                </div>
            </li>
            </ul>
            <oo>}</oo>

    </div>
</div>

</template>
<script>
    $f("df", __, function (_page, _data) {
        var url = $f("tools.serverURL", "archive/department/findDepartmentByPid");
        $f("ajax.get", url, null, "__.list", _page,_data)();


    });

    $f("df", "__.list", function (_data, _page,data) {

        var content = $f("TPPL", _page, _data);

        $("#userall").html(content);
        $(".lia").click(function(){
            var id=$(this).attr("data");
            var name=$(this).attr("data-type");
            var html="<span class='mmbx' data=''>组织架构</span>><span class='mmbx' data='"+id+"'>"+name+"</span>"
            var data1={
                id:id,
                name:name,
                html:html,
            }
            $f('plugin','agency.get-user-list.get-user-org-childs',data1);

        });

    });


</script>
